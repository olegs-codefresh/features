version: '1.0'

steps:

  composition:
    type: composition
    composition:
      version: '2'
      services:
        s3:
          image: ubuntu
    composition_candidates:
      s2:
        image: codefreshio/cf-compose-model:master
        command:  npm run e2e_test
      s1:
        image: codefreshio/cf-compose-model:master
        command: /bin/bash -c 'sleep 30 && npm run unit_test'

    composition:
      type: launch-composition
      composition:
        version: '2'
        services:
          s3:
            image: ubuntu
            command: /bin/bash -c 'sleep 30 && echo HI'
          s1:
            image: node
